<div class="feed-container">
  <div class="feed-header">
    <h1>Game Feed</h1>
    <%= render 'player_selector', players: @players, current_player: @current_player %>
  </div>
  
  <div id="messages" class="messages-container">
    <% @messages.each do |message| %>
      <%= render 'message', message: message %>
    <% end %>
  </div>
  
  <div class="message-form">
    <% if @current_player %>
      <%= form_with model: @message, url: messages_path, local: false do |form| %>
        <div class="form-group">
          <%= form.text_area :content, placeholder: "Type your message...", class: "message-input", rows: 4 %>
        </div>
        <%= form.submit "Send", class: "send-button" %>
      <% end %>
    <% else %>
      <div class="disabled-form">
        <div class="form-group">
          <textarea placeholder="Please select a player to send messages..." class="message-input disabled" rows="2" disabled></textarea>
        </div>
        <button class="send-button disabled" disabled>Send</button>
      </div>
    <% end %>
  </div>
  
  <!-- Dice Rolling Section -->
  <% if @current_player %>
    <%= render 'dice_form' %>
  <% else %>
    <div class="dice-section disabled">
      <h3>ðŸŽ² Roll Dice</h3>
      <div class="disabled-message">
        Please select a player to roll dice
      </div>
    </div>
  <% end %>
</div>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap');

  body {
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
    color: #c0c0c0;
    font-family: 'Rajdhani', monospace;
    margin: 0;
    padding: 0;
    min-height: 100vh;
  }

  .feed-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
    border: 2px solid #4a4a4a;
    border-radius: 12px;
    box-shadow: 
      0 0 20px rgba(0, 0, 0, 0.8),
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.5);
    position: relative;
  }

  .feed-container::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #8b4513, #cd853f, #8b4513, #a0522d);
    border-radius: 14px;
    z-index: -1;
    opacity: 0.3;
  }

  .feed-header {
    border-bottom: 2px solid #8b4513;
    padding-bottom: 15px;
    margin-bottom: 20px;
    background: linear-gradient(90deg, rgba(139, 69, 19, 0.1), transparent);
  }

  .feed-header h1 {
    font-family: 'Orbitron', monospace;
    font-weight: 900;
    font-size: 2.2em;
    margin: 0;
    color: #silver;
    text-shadow: 
      0 0 10px rgba(192, 192, 192, 0.5),
      0 2px 4px rgba(0, 0, 0, 0.8);
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .messages-container {
    height: 500px;
    overflow-y: auto;
    border: 2px solid #4a4a4a;
    padding: 15px;
    margin-bottom: 20px;
    background: 
      linear-gradient(145deg, #1e1e1e, #2a2a2a),
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(139, 69, 19, 0.05) 2px,
        rgba(139, 69, 19, 0.05) 4px
      );
    border-radius: 8px;
    box-shadow: 
      inset 0 2px 8px rgba(0, 0, 0, 0.6),
      inset 0 -2px 8px rgba(255, 255, 255, 0.02);
    scrollbar-width: thin;
    scrollbar-color: #8b4513 #2a2a2a;
  }

  .messages-container::-webkit-scrollbar {
    width: 8px;
  }

  .messages-container::-webkit-scrollbar-track {
    background: #2a2a2a;
    border-radius: 4px;
  }

  .messages-container::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #8b4513, #a0522d);
    border-radius: 4px;
    border: 1px solid #654321;
  }

  .message {
    margin-bottom: 18px;
    padding: 12px 15px;
    background: linear-gradient(135deg, #333333, #2a2a2a);
    border: 1px solid #4a4a4a;
    border-left: 4px solid #8b4513;
    border-radius: 6px;
    box-shadow: 
      0 2px 6px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
    position: relative;
    font-size: 1.1em;
  }

  .message::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(139, 69, 19, 0.6), transparent);
  }

  .message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    color: #a0a0a0;
    font-size: 0.95em;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .message-form {
    display: flex;
    gap: 12px;
    align-items: flex-end;
    margin-bottom: 25px;
    padding: 15px;
    background: linear-gradient(135deg, #2a2a2a, #1e1e1e);
    border: 2px solid #4a4a4a;
    border-radius: 8px;
    box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.4);
  }

  .form-group {
    flex: 1;
  }

 .message-input {
  width: 100%;
  box-sizing: border-box;
  padding: 12px 15px;
  background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
  border: 2px solid #4a4a4a;
  border-radius: 6px;
  color: #c0c0c0;
  font-family: 'Rajdhani', monospace;
  font-size: 1.1em;
  resize: vertical;
  box-shadow: 
    inset 0 2px 6px rgba(0, 0, 0, 0.6),
    0 0 0 0 rgba(139, 69, 19, 0);
  transition: all 0.3s ease;
}


  .message-input:focus {
    outline: none;
    border-color: #8b4513;
    box-shadow: 
      inset 0 2px 6px rgba(0, 0, 0, 0.6),
      0 0 10px rgba(139, 69, 19, 0.4);
  }

.message-input::placeholder {
  color: #888;
  font-style: italic;
}
  .send-button {
    padding: 12px 25px;
    background: linear-gradient(135deg, #8b4513, #a0522d);
    color: #ffffff;
    border: 2px solid #654321;
    border-radius: 6px;
    cursor: pointer;
    font-family: 'Orbitron', monospace;
    font-weight: 700;
    font-size: 1em;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 
      0 4px 8px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transition: all 0.2s ease;
  }

  .send-button:hover {
    background: linear-gradient(135deg, #a0522d, #cd853f);
    box-shadow: 
      0 6px 12px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
  }

  .send-button:active {
    transform: translateY(0);
    box-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .disabled-form {
    display: flex;
    gap: 12px;
    align-items: flex-end;
    width: 100%;
  }

  .message-input.disabled,
  .send-button.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: linear-gradient(135deg, #3a3a3a, #2a2a2a);
    border-color: #555;
  }

  .send-button.disabled {
    background: linear-gradient(135deg, #555, #444);
  }

  /* Dice Rolling Styles */
  .dice-section {
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 20px;
    background: 
      linear-gradient(135deg, #2a2a2a, #1e1e1e),
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(139, 69, 19, 0.05) 10px,
        rgba(139, 69, 19, 0.05) 20px
      );
    box-shadow: 
      0 4px 12px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    position: relative;
  }

  .dice-section::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #8b4513, #cd853f, #8b4513);
    border-radius: 12px;
    z-index: -1;
    opacity: 0.3;
  }

  .dice-section.disabled {
    opacity: 0.6;
    background: linear-gradient(135deg, #3a3a3a, #2a2a2a);
    border-color: #555;
  }

  .dice-section h3 {
    margin: 0 0 20px 0;
    color: #cd853f;
    font-family: 'Orbitron', monospace;
    font-weight: 700;
    font-size: 1.4em;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 0 0 8px rgba(205, 133, 63, 0.4);
  }

  .dice-controls {
    display: flex;
    gap: 20px;
    align-items: center;
    flex-wrap: wrap;
  }

  .dice-type-group {
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .dice-count .dice-input {
    width: 60px;
    padding: 8px;
    text-align: center;
    border: 2px solid #4a4a4a;
    border-radius: 4px;
    background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
    color: #c0c0c0;
    font-family: 'Rajdhani', monospace;
    font-weight: 600;
    font-size: 1.1em;
  }

  .dice-input:focus {
    outline: none;
    border-color: #8b4513;
    box-shadow: 0 0 8px rgba(139, 69, 19, 0.4);
  }

  .dice-buttons {
    display: flex;
    gap: 8px;
  }

  .dice-button {
    padding: 10px 16px;
    background: linear-gradient(135deg, #8b4513, #a0522d);
    color: #ffffff;
    border: 2px solid #654321;
    border-radius: 6px;
    cursor: pointer;
    font-family: 'Orbitron', monospace;
    font-weight: 700;
    font-size: 0.9em;
    text-transform: uppercase;
    box-shadow: 
      0 3px 6px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transition: all 0.2s ease;
  }

  .dice-button:hover {
    background: linear-gradient(135deg, #a0522d, #cd853f);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 8px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .dice-button:active {
    transform: translateY(0);
    box-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .modifier-group {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .modifier-group label {
    font-weight: 600;
    color: #cd853f;
    font-family: 'Orbitron', monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .modifier-input {
    width: 70px;
    padding: 8px;
    text-align: center;
    border: 2px solid #4a4a4a;
    border-radius: 4px;
    background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
    color: #c0c0c0;
    font-family: 'Rajdhani', monospace;
    font-weight: 600;
    font-size: 1.1em;
  }

  .modifier-input:focus {
    outline: none;
    border-color: #8b4513;
    box-shadow: 0 0 8px rgba(139, 69, 19, 0.4);
  }

  .disabled-message {
    color: #888;
    font-style: italic;
    font-size: 1.1em;
    text-align: center;
    padding: 20px;
  }

  .player-select {
    padding: 10px 15px;
    background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
    border: 2px solid #4a4a4a;
    border-radius: 6px;
    color: #c0c0c0;
    font-family: 'Rajdhani', monospace;
    font-size: 1.1em;
    font-weight: 500;
  }

  .player-select:focus {
    outline: none;
    border-color: #8b4513;
    box-shadow: 0 0 8px rgba(139, 69, 19, 0.4);
  }

  /* Subtle animations */
  @keyframes flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }

  .feed-header h1 {
    animation: flicker 3s ease-in-out infinite;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .feed-container {
      margin: 10px;
      padding: 15px;
    }
    
    .dice-controls {
      flex-direction: column;
      align-items: flex-start;
    }
    
    .dice-buttons {
      flex-wrap: wrap;
    }
  }
</style>